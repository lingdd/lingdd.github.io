<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>在你的iOS应用中添加自定义的下拉刷新控制 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="译自Appcoda，作者 gabriel theodoropoulos

演示应用程序下面的动画显示的是我们在这个教程中准备实现的自定义下拉刷新控件

正如你所见，tableview中包含一些假的数据，因为我们这里的目的并不是从网络服务器中获取真实的数据。这里最重要的部分是在刷新过程中，菊花不会显示；相反，”APPCODE”这个词会在刷新过程中以自定义的样式显示动画效果。
如果你想知道假的刷新是在">
<meta property="og:type" content="article">
<meta property="og:title" content="在你的iOS应用中添加自定义的下拉刷新控制">
<meta property="og:url" content="http://yoursite.com/2015/10/30/在你的iOS应用中添加自定义的下拉刷新控制/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="译自Appcoda，作者 gabriel theodoropoulos

演示应用程序下面的动画显示的是我们在这个教程中准备实现的自定义下拉刷新控件

正如你所见，tableview中包含一些假的数据，因为我们这里的目的并不是从网络服务器中获取真实的数据。这里最重要的部分是在刷新过程中，菊花不会显示；相反，”APPCODE”这个词会在刷新过程中以自定义的样式显示动画效果。
如果你想知道假的刷新是在">
<meta property="og:image" content="http://7xnk7q.com1.z0.glb.clouddn.com/pull-to-refresh-featured-1024x533.jpg">
<meta property="og:image" content="http://7xnk7q.com1.z0.glb.clouddn.com/t38_1_final_sample.gif">
<meta property="og:image" content="http://7xnk7q.com1.z0.glb.clouddn.com/t38_2_tableview_data.png">
<meta property="og:image" content="http://7xnk7q.com1.z0.glb.clouddn.com/t38_3_default_refresh.gif">
<meta property="og:image" content="http://7xnk7q.com1.z0.glb.clouddn.com/t38_4_red_yellow_refresh.gif">
<meta property="og:updated_time" content="2015-10-30T04:21:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="在你的iOS应用中添加自定义的下拉刷新控制">
<meta name="twitter:description" content="译自Appcoda，作者 gabriel theodoropoulos

演示应用程序下面的动画显示的是我们在这个教程中准备实现的自定义下拉刷新控件

正如你所见，tableview中包含一些假的数据，因为我们这里的目的并不是从网络服务器中获取真实的数据。这里最重要的部分是在刷新过程中，菊花不会显示；相反，”APPCODE”这个词会在刷新过程中以自定义的样式显示动画效果。
如果你想知道假的刷新是在">
  
  
    <link rel="icon" href="/favicon.png">
  

  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  
  
    <link rel="stylesheet" href="/scrollLoading/style.css" type="text/css">
  
  


  

  
    <link href='//fonts.useso.com/css?family=Titillium+Web:300,400,600' rel='stylesheet' type='text/css'>
    <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">
</head>

<body>
  <div id="wrap">
    <header id="header">
  <div id="header-outer" class="outer">
    <div class="container">
      <div class="container-inner">
        <div id="header-title">
          <h1 class="logo-wrap">
            <a href="/" class="logo"></a>
          </h1>
          
        </div>
        <div id="header-inner" class="nav-container">
          <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
          <div class="nav-container-inner">
            <ul id="main-nav">
              
                <li class="main-nav-list-item" ><a class="main-nav-list-link" href="/">主页</a></li>
              
                    
                  
                <li class="main-nav-list-item" ><a class="main-nav-list-link" href="/about/index.html">关于</a></li>
              
            </ul>
            <nav id="sub-nav">
              <div id="search-form-wrap">
                <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="搜索"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
    <div class="container">
      <div class="main-body container-inner">
        <div class="main-body-inner">
          <section id="main">
            <div class="main-body-header">

              <h1 class="header">未分类</h1>
            </div>
            <div class="main-body-content">
              
  <article id="post-在你的iOS应用中添加自定义的下拉刷新控制" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
      <!--  -->
      
        <header class="article-header">
          
  
    <h1 class="article-title" itemprop="name">
      在你的iOS应用中添加自定义的下拉刷新控制
    </h1>
  

        </header>
      
      <p class="article-byline">
        <a href="/2015/10/30/在你的iOS应用中添加自定义的下拉刷新控制/" class="article-date">
  <time datetime="2015-10-30T03:54:47.000Z" itemprop="datePublished">2015-10-30</time>
</a>
      </p>
      <div class="article-entry" itemprop="articleBody">
        <p>译自<a href="http://www.appcoda.com/custom-pull-to-refresh/" target="_blank" rel="external">Appcoda</a>，作者 <a href="http://www.appcoda.com/author/gabrielth/" target="_blank" rel="external">gabriel theodoropoulos</a></p>
<p><img src="http://7xnk7q.com1.z0.glb.clouddn.com/pull-to-refresh-featured-1024x533.jpg" alt=""></p>
<h4 id="演示应用程序">演示应用程序</h4><p>下面的动画显示的是我们在这个教程中准备实现的自定义下拉刷新控件</p>
<p><img src="http://7xnk7q.com1.z0.glb.clouddn.com/t38_1_final_sample.gif" alt=""></p>
<p>正如你所见，tableview中包含一些假的数据，因为我们这里的目的并不是从网络服务器中获取真实的数据。这里最重要的部分是在刷新过程中，菊花不会显示；相反，”APPCODE”这个词会在刷新过程中以自定义的样式显示动画效果。</p>
<p>如果你想知道假的刷新是在什么时候结束的，我能告诉你的是使用了一个timer(NSTimer)对象</p>
<h4 id="默认的下拉刷新">默认的下拉刷新</h4><p>我们在示例程序中做的第一件事就是在tableview中显示那些假数据。在你下载的启动项目中，已经有一个名为tblDemo的IBOutlet属性连接到storyboard中的tableview，所以我们需要实现必要的tableview delegate和datasource方法。然而，在我们开始之前，我们需要定义在tableview中显示的数据。因此，在ViewController.swift文件中，在类的头部，我们加上下面一行：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dataArray: <span class="type">Array</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"One"</span>, <span class="string">"Two"</span>, <span class="string">"Three"</span>, <span class="string">"Four"</span>, <span class="string">"Five"</span>]</span><br></pre></td></tr></table></figure>
<p>现在，略微修改一下类的定义，增加UITableViewDelegate和UITableViewDataSource协议：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span>, <span class="title">UITableViewDelegate</span>, <span class="title">UITableViewDataSource</span></span></span><br></pre></td></tr></table></figure>
<p>之后，我们必须设置ViewController类的实例作为tableview的delegate和datasource。我们在viewDidLoad中加上：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">	...</span><br><span class="line">	tblDemo.delegate = <span class="keyword">self</span></span><br><span class="line">	tblDemo.datasource = <span class="keyword">self</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在，让我们加上剩下的tableview方法以便能够显示我们的假数据：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">numberOfSectionInTableView</span><span class="params">(tableView: UITableView)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> dataArray.<span class="built_in">count</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">	<span class="keyword">let</span> cell = tableView.dequeueReusableCellWithIdentifier(<span class="string">"idCell"</span>, forIndexPath: indexPath) <span class="keyword">as</span>! <span class="type">UITableViewCell</span></span><br><span class="line">	cell.textLabel!.text = dataArray[indexPath.row]</span><br><span class="line">	<span class="keyword">return</span> cell</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">60.0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上面的实现中没有任何难度，如果你运行程序你会看到“One, Two, …”会在tableview中显示：</p>
<p><img src="http://7xnk7q.com1.z0.glb.clouddn.com/t38_2_tableview_data.png" alt=""></p>
<p>现在让我们集中注意力于如何显示和使用默认的下拉刷新。在这个例子中，你的类是ViewController类的一个子类，或者是其他的什么类，除了UITableViewController类。我们在类的头部定义refresh控制器。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> refreshControl: <span class="type">UIRefreshControl</span>!</span><br></pre></td></tr></table></figure>
<p>在viewDidLoad方法中，我们先初始化refresh控制器，然后我们将它加到tableview中：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> fun viewDidLoad() &#123;</span><br><span class="line">	...</span><br><span class="line">	refreshControl = <span class="type">UIRefreshControl</span>()</span><br><span class="line">	tblDemo.addSubView(refreshControl)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://7xnk7q.com1.z0.glb.clouddn.com/t38_3_default_refresh.gif" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">	...</span><br><span class="line">	refreshControl = <span class="type">UIRefreshControl</span>()</span><br><span class="line">	</span><br><span class="line">	refreshControl.backgroundColor = <span class="type">UIColor</span>.redColor()</span><br><span class="line">	refreshControl.tintColor = <span class="type">UIColor</span>.yellowColor()</span><br><span class="line">	</span><br><span class="line">	tblDemo.addSubView(refreshControl)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://7xnk7q.com1.z0.glb.clouddn.com/t38_4_red_yellow_refresh.gif" alt=""></p>

      </div>
      <footer class="article-footer">
        <a data-url="http://yoursite.com/2015/10/30/在你的iOS应用中添加自定义的下拉刷新控制/" data-id="cigd5khhx00012nwrn1l0otcy" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
        
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

      </footer>
    </div>
  </article>
  
  

            </div>
          </section>
          <aside id="sidebar">
  <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
  <div class="sidebar-top">
    <p>关注我 :</p>
    <ul class="social-links">
      
        <li><a class="social-tooltip" title="twitter" href="/" target="_blank"><i class="icon fa fa-twitter"></i></a></li>
      
        <li><a class="social-tooltip" title="facebook" href="/" target="_blank"><i class="icon fa fa-facebook"></i></a></li>
      
        <li><a class="social-tooltip" title="google-plus" href="/" target="_blank"><i class="icon fa fa-google-plus"></i></a></li>
      
        <li><a class="social-tooltip" title="github" href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank"><i class="icon fa fa-github"></i></a></li>
      
        <li><a class="social-tooltip" title="weibo" href="/" target="_blank"><i class="icon fa fa-weibo"></i></a></li>
      
        <li><a class="social-tooltip" title="rss" href="/" target="_blank"><i class="icon fa fa-rss"></i></a></li>
      
    </ul>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/10/16/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <p class="article-nav-title">Hello World</p>
      <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
    </a>
  
</nav>

  
  <div class="widgets-container">
    
      
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul id="recent-post" class="">
        
          <li>
            
            <div class="item-thumbnail">
              
<a href="/2015/10/30/在你的iOS应用中添加自定义的下拉刷新控制/" class="thumbnail">
  
    <span style="background-image:url(http://7xnk7q.com1.z0.glb.clouddn.com/pull-to-refresh-featured-1024x533.jpg
)" alt="在你的iOS应用中添加自定义的下拉刷新控制" class="thumbnail-image"></span>
  
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/2015/10/30/在你的iOS应用中添加自定义的下拉刷新控制/" class="title">在你的iOS应用中添加自定义的下拉刷新控制</a></p>
              <p class="item-date"><time datetime="2015-10-30T03:54:47.000Z" itemprop="datePublished">2015-10-30</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              
<a href="/2015/10/16/hello-world/" class="thumbnail">
  
    <span class="thumbnail-image thumbnail-none"></span>
  
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/2015/10/16/hello-world/" class="title">Hello World</a></p>
              <p class="item-date"><time datetime="2015-10-16T01:24:08.000Z" itemprop="datePublished">2015-10-16</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

    
      

    
      
  <div class="widget-wrap widget-list">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-list">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-float">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/swift/" style="font-size: 10px;">swift</a>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-list">
    <h3 class="widget-title">链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>


    
  </div>
</aside>
        </div>
      </div>
    </div>
    <footer id="footer">
  
  <div class="container">
    <div class="container-inner">
      <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
      <div class="credit">
        <h1 class="logo-wrap">
          <a href="/" class="logo"></a>
        </h1>
        <p>&copy; 2015 John Doe</p>
        <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
      </div>
    </div>
  </div>
</footer>
    


  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>



  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



  <script src="/scrollLoading/jquery.scrollLoading.js" type="text/javascript"></script>
  <script src="/scrollLoading/main.js" type="text/javascript"></script>


<script src="/js/html-patch.js" type="text/javascript"></script>
<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>
